(function(i,a){typeof exports=="object"&&typeof module!="undefined"?a(exports):typeof define=="function"&&define.amd?define(["exports"],a):(i=typeof globalThis!="undefined"?globalThis:i||self,a(i.index={}))})(this,function(i){"use strict";var a=(e=>(e.Fever="F",e.Healthy="H",e.Diabetes="D",e.Tuberculosis="T",e.Dead="X",e))(a||{}),r=(e=>(e.Aspirin="As",e.Antibiotic="An",e.Insulin="I",e.Paracetamol="P",e))(r||{});const d=class{constructor(e){this.hasStateChanged=new Set,this.patientStates=e,this.drugsAdministered=[]}determineInteraction(e){const t={AsP:"Death",AnI:"FeverForHealthy",As:"CuresFever",An:"CuresTuberculosis",I:"PreventsDiabeticDeath",P:"AlsoCuresFever"},s=e.sort((o,p)=>o.localeCompare(p)).join("");return t[s]||null}updateState(e,t){this.hasStateChanged.size>0||(this.patientStates[t]+=this.patientStates[e],this.patientStates[e]=0,this.hasStateChanged.add(e))}setDrugs(e){this.drugsAdministered=e}wait40Days(){const e=this.determineInteraction(this.drugsAdministered),t={...this.patientStates};if(e==="Death"){const n=Object.values(t).reduce((s,o)=>s+o,0);t.X+=n,Object.keys(t).forEach(s=>{s!=="X"&&(t[s]=0)}),this.patientStates=t;return}for(const n in this.patientStates){const s=this.patientStates[n];switch(e){case"FeverForHealthy":n==="H"&&(t.F+=s,t[n]=0),n==="T"&&(t.H+=s,t[n]=0);break;case"CuresTuberculosis":n==="T"&&(t.H+=s,t[n]=0);break;case"CuresFever":case"AlsoCuresFever":n==="F"&&(t.H+=s,t[n]=0);break;case"PreventsDiabeticDeath":break;default:this.drugsAdministered.length&&console.warn(`${d.UNKNOWN_DRUG}: ${this.drugsAdministered.join(", ")}`);break}n==="D"&&!this.drugsAdministered.includes("I")&&(t.X+=s,t[n]=0)}this.patientStates=t}report(){return this.patientStates}};let l=d;l.UNKNOWN_DRUG="Interaction for this drug/combination is not implemented";const h={[a.Fever]:"Fever",[a.Healthy]:"Healthy",[a.Diabetes]:"Diabetes",[a.Tuberculosis]:"Tuberculosis",[a.Dead]:"Dead"},f={[r.Aspirin]:"Aspirin",[r.Antibiotic]:"Antibiotic",[r.Insulin]:"Insulin",[r.Paracetamol]:"Paracetamol"};function c(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}const u=Object.values(r),b=Object.values(a).filter(e=>e!==a.Dead),g=0,D=3;function A({min:e,max:t}){const n=e&&e>0?e:g,s=t&&t>0?t:D;return b.flatMap(o=>new Array(c(n,s)).fill(o)).join(",")}function m(){const e=c(0,u.length-1),t=c(0,u.length-1);return e!==t?u[e]+","+u[t]:u[e]}i.Drug=r,i.DrugFullName=f,i.PatientState=a,i.PatientStateFullName=h,i.Quarantine=l,i.generateDrugs=m,i.generatePatientsStatus=A,i.getRandomInt=c,Object.defineProperties(i,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
